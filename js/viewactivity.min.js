function takeActivity(){$.post("./api/read/activity",JSON.stringify({}),function(t){"Success"===t.Status?(alldata=t.Return,handleReturn(),alertify.success("Successfully retrieved all information")):(alertify.error(t.error),console.log(t))}).fail(function(){alertify.error("Error occurred while fetching data.")})}function handleReturn(){for(count=alldata.length,i=0;i<count;i++)if(row=alldata[i],"Done"!==row.activitystatus){var t=$("<tr>"),a=$("<th>").attr("scope","row").text(i+1),e=$("<td>").text(row.activityname),r=$("<td>").text(row.activitydate),n=$("<td>").text(timeConvert(row.activitytimestart)),c=$("<td>").text(timeConvert(row.activitytimeend)),l=$("<td>").text(row.activitystatus),o=$("<td>").append($("<span>").append($("<a>").addClass("bi bi-pencil-square").attr("onclick","update("+i+")").attr("data-bs-toggle","modal").attr("data-bs-target","#updateModal"))),s=$("<td>").append($("<span>").append($("<a>").addClass("bi bi-trash3-fill").attr("onclick","deleting("+i+")")));t.append(a),t.append(e),t.append(r),t.append(n),t.append(c),t.append(l),t.append(o),t.append(s),$("tbody").append(t)}}function update(t){selectedIndex=t,rowData=alldata[t],$("#activityname").val(rowData.activityname),$("#place").val(rowData.activityplace),$("#date").val(rowData.activitydate),$("#status").val(rowData.activitystatus),$("#timestart").val(rowData.activitytimestart),$("#timeend").val(rowData.activitytimeend)}function saveNewData(){activityname=$("#activityname").val(),place=$("#place").val(),date=$("#date").val(),timestart=$("#timestart").val(),timeend=$("#timeend").val(),statusing=$("#status").val(),$.post("./api/update/activity",JSON.stringify({key:alldata[selectedIndex].activityid,name:activityname,place:place,date:date,status:statusing,timestart:timestart,timeend:timeend}),function(t){"Success"===t.Status?(alertify.success("Successfully update the information"),$("tbody").empty(),takeActivity()):(alertify.error(t.error),console.log(t))}).fail(function(){alertify.error("Error occurred while fetching data.")})}function deleting(t){alertify.confirm("Deletion","Are you sure to delete ?",function(){$.post("./api/delete/activity",JSON.stringify({key:alldata[t].activityid}),function(t){"Success"===t.Status?(alertify.success("Successfully delete the activity"),$("tbody").empty(),takeActivity()):(alertify.error(t.error),console.log(t))}).fail(function(){alertify.error("Error occurred while fetching data.")})},function(){alertify.error("Cancel")}).set("basic",!1)}function timeConvert(t){const[a,e]=t.split(":"),i=parseInt(a)%12||12,r=parseInt(a)>=12?"pm":"am";return`${i}:${e} ${r}`}function timeConvertBack(t){const[a,e]=t.split(" ");let[i,r]=a.split(":");return i=parseInt(i),"pm"===e&&12!==i?i+=12:"am"===e&&12===i&&(i=0),i=i.toString().padStart(2,"0"),r=r.padStart(2,"0"),`${i}:${r}`}var alldata,selectedIndex;takeActivity(),$("#newActivity").toggleClass("hilang");