function handleReturn(e){if("Success"===e.Status){if(alldata=e,alldata=Object.entries(e.Return),count=alldata.length,0==count)return void alertify.warning("There are no information available.");for(i=0;i<count;i++)(function(e){$.get("./component/row.min.html",function(t){var a=$(t);const n=Object.entries(alldata[e][1]);a.find("#num").text(e+1),a.find("#table1").text(n[1][1]),a.find("#table2").text(n[3][1]),a.find("#table3").text(n[4][1]),a.find("#table4").text(n[5][1]),a.find("#table5").text(n[6][1]),a.find("#updating").attr("onclick","update("+e+")"),a.find("#deleting").attr("onclick","deleting("+e+")"),$("tbody").append(a)})})(i);alertify.success("Successfully retrieved all information")}else alertify.error(e.error),console.log(e)}function getInformation(){$.post("./api/read/"+pageOpen,JSON.stringify({}),function(e){console.log(e);try{handleReturn(e)}catch(e){alertify.warning("There are no account information available.")}}).fail(function(){alertify.error("Error occurred while fetching data.")})}function fetchType(){try{url=window.location.href,"volunteers"===url.substring(url.match("=").index+1)?pageOpen="volunteer":"admin"===url.substring(url.match("=").index+1)?(pageOpen="admin",$("#addAdmin").removeClass("hilang")):pageOpen="beneficiaries"}catch(e){pageOpen="volunteer"}getInformation()}function update(e){$("#modalName").text("Edit User"),$("#adminPassword").addClass("hilang"),$("#statusArea").removeClass("hilang"),$("#modalSaveData").attr("onclick","saveNewData()"),selectedIndex=e,rowData=Object.entries(alldata[e][1]),$("#username").val(rowData[1][1]),$("#email").val(rowData[3][1]),$("#state").val(rowData[5][1]),$("#status").val(rowData[6][1]),$("#phone").val(rowData[4][1])}function deleting(e){id_type="beneficiary"===pageOpen?"beneficiaries_id":"admin"===pageOpen?"admin_id":pageOpen+"_id",alertify.confirm("Deletion","Are you sure to delete ?",function(){$.post("./api/delete/"+pageOpen,JSON.stringify({key:Object.entries(alldata[e][1]),id_type:id_type}),function(e){"Success"===e.Status?(alertify.success("Successfully delete the user"),$("tbody").empty(),fetchType()):(alertify.error(e.error),console.log(e))}).fail(function(){alertify.error("Error occurred while fetching data.")})},function(){alertify.error("Cancel")}).set("basic",!1)}function saveNewData(){username=$("#username").val(),email=$("#email").val(),state=$("#state").val(),statusing=$("#status").val(),phone=$("#phone").val(),$.post("./api/update/"+pageOpen,JSON.stringify({key:Object.entries(alldata[selectedIndex][1])[0][1],name:username,email:email,state:state,status:statusing,phone:phone}),function(e){try{if("error"===e.Return)return console.log(e.error),console.log(e.errorType),void alertify.error("An Error occurred while fetching data.");alertify.success("Successfully update the information"),$("tbody").empty(),fetchType()}catch(e){alertify.error("An Error occurred while fetching data."),console.log(e)}}).fail(function(e){console.log(e.responseText),alertify.error("Error occurred while fetching data.")})}function change(){spanType=document.getElementById("password"),icon=document.getElementById("bi"),icon.classList.toggle("bi-eye-slash"),icon.classList.toggle("bi-eye"),"password"===spanType.type?spanType.type="text":spanType.type="password"}function addAdmin(){username=$("#username").val(),email=$("#email").val(),pass=$("#password").val(),state=$("#state").val(),phone=$("#phone").val(),$.post("./api/create/admin",JSON.stringify({name:username,email:email,pass:pass,state:state,phone:phone}),function(e){try{if("error"===e.Return)return console.log(e.error),console.log(e.errorType),void alertify.error("An Error occurred while fetching data.");alertify.success("Successfully Add Admin into the System"),$("tbody").empty(),fetchType()}catch(e){alertify.error("An Error occurred while fetching data."),console.log(e)}}).fail(function(e){console.log(e.responseText),alertify.error("Error occurred while fetching data.")})}var alldata,selectedIndex,pageOpen;$("#addAdmin").click(()=>{$("#adminPassword").removeClass("hilang"),$("#statusArea").addClass("hilang"),$("#modalName").text("Add Admin"),$("#modalSaveData").attr("onclick","addAdmin()")}),fetchType();